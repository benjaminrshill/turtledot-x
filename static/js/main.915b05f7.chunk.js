(this["webpackJsonpturtledot-x"]=this["webpackJsonpturtledot-x"]||[]).push([[0],{15:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(1),a=n.n(i),r=n(23),s=n.n(r),o=n(12),l=n(3),d=n.p+"static/media/turtledot.9f70b9aa.svg";n(31);function j(){return Object(c.jsx)("header",{children:Object(c.jsx)("img",{src:d,className:"logo",alt:"logo"})})}n(32);var u=n(46),b=n(47);function m(){return Object(c.jsxs)("nav",{children:[Object(c.jsxs)(o.b,{to:"/Items",className:"menu-item",activeClassName:"here",children:[Object(c.jsx)("div",{className:"menu-icon",children:Object(c.jsx)(u.a,{size:16})}),Object(c.jsx)("div",{className:"menu-text",children:"Items"})]}),Object(c.jsxs)(o.b,{to:"/Arrange",className:"menu-item",activeClassName:"here",children:[Object(c.jsx)("div",{className:"menu-icon",children:Object(c.jsx)("span",{className:"menu-icon-doit"})}),Object(c.jsx)("div",{className:"menu-text",children:"Arrange"})]}),Object(c.jsxs)(o.b,{to:"/Archive",className:"menu-item",activeClassName:"here",children:[Object(c.jsx)("div",{className:"menu-icon",children:Object(c.jsx)(b.a,{size:16})}),Object(c.jsx)("div",{className:"menu-text",children:"Archive"})]})]})}var h=n(9),O=n(5),g=n(4);function x(e){return e.text.length>0&&e.text.length<12&&e.number>0&&(!!(e.type&&e.number<8)||(!e.type&&e.number<100001||void 0))}var f=n(21),v=n.n(f),p=n(25);function k(e){return e>99999?"100k":e>9999?e.toString().slice(0,2)+"k":e>999?e%1e3===0?e.toString().slice(0,1)+"k":e.toString().slice(0,1)+"."+e.toString().slice(1,2)+"k":e%1!==0?Math.ceil(e):e}n(39);function w(e){var t=Object(i.useState)(Object(h.a)(e.todo)),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],j=Object(i.useState)({currentTotal:0,avgTodo:0,tooHigh:!1,tooLow:!1,allDone:!1,cutNum:0,goalNum:0,originalDay:0,today:0}),u=Object(O.a)(j,2),b=u[0],m=u[1];function g(e){var t=Object(h.a)(a);t[e.target.dataset.day]=e.target.value,r(Object(h.a)(t))}function x(t){var n;((n=t.target.value)>-2&&n<100001||""===n)&&(e.onSaveTodo(t),d(!1))}return Object(i.useEffect)((function(){return r(Object(h.a)(e.todo))}),[e]),Object(i.useEffect)((function(){return function(){var t=[];e.todo.forEach((function(e){return e>-1?t.push(+e):null}));var n=t.reduce((function(e,t){return e+t}),0),c=n>=+e.number,i=e.number/t.length,a=t.length>+e.number,r=t.length<+e.number,s=k(+e.number),o=k(+e.number-n),l=(new Date).getDay();m({currentTotal:n,avgTodo:i,tooHigh:a,tooLow:r,allDone:c,cutNum:s,goalNum:o,originalDay:l,today:0===l?6:l-1})}()}),[e]),Object(c.jsxs)("tr",{draggable:!e.archive,id:e.id+e.weekBeginning,"data-index":e.index,"data-dragid":e.id,"data-dragweek":e.weekBeginning,className:b.allDone?"allDone":e.color,children:[Object(c.jsxs)("td",{id:e.id,className:"week-item left-column",children:[!e.archive&&Object(c.jsx)("button",{value:e.id,onClick:e.onRemoveItem,className:"week-item-delete",children:"\u2014"}),e.text]}),Object(c.jsx)("td",{className:"main-cell week-item-number"+(e.type&&(b.tooHigh?" week-number-arrow-down":b.tooLow?" week-number-arrow-up":"")),children:k(b.allDone?b.currentTotal:b.goalNum>-1?b.goalNum:e.number)}),a.map((function(t,n){return Object(c.jsx)("td",{"data-id":e.id,"data-item":e.index,"data-day":n,"data-week":e.weekBeginning,onClick:e.type?e.onChangeDay:e.isThisWeek?function(){return d(!0)}:e.onChangeDay,className:"main-cell week-spots"+(e.isThisWeek&&b.today===n?e.color:""),children:l?Object(c.jsx)("input",{type:"number",min:"-1",max:"100000","data-id":e.id,"data-item":e.index,"data-day":n,"data-week":e.weekBeginning,value:t>-1?t:"",className:"type-cell"+(0===t?" grey":""),onChange:g,onBlur:x}):Object(c.jsx)("div",{className:e.type?"spot"+(1===t?" closed":0===t?" open":""):"type-cell"+(0===t?" grey":""),children:!e.type&&t>0?t:!e.type&&t>-1?k(b.avgTodo):""})},n+e.id+e.weekBeginning)}))]})}n(15);function N(e){var t=Object(i.useState)(JSON.parse(localStorage.getItem(e.weekBeginning))),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)(JSON.parse(localStorage.getItem("items"))),o=Object(O.a)(s,2),l=o[0],d=o[1],j=Object(i.useState)([]),u=Object(O.a)(j,2),b=u[0],m=u[1];function x(){return(x=Object(p.a)(v.a.mark((function t(){var n,c,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],c=JSON.parse(localStorage.getItem("items")),t.next=4,JSON.parse(localStorage.getItem(e.weekBeginning));case 4:(i=t.sent)&&i.items.forEach((function(e){var t=c.findIndex((function(t){return t.id===e[0]}));if(t>-1){var i=c.splice(t,1);i[0].todo=e[1],n.push(i[0])}})),d(Object(h.a)(c)),m([].concat(n));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){var n=Object(g.a)({},a);console.log(n),void 0===n.items&&(n={date:e.weekBeginning,items:[]}),console.log(n),n.items.push([t.target.value,[-1,-1,-1,-1,-1,-1,-1]]),localStorage.setItem(e.weekBeginning,JSON.stringify(n)),r(Object(g.a)({},n))}function k(t){if(window.confirm("Really remove this item from schedule?")){var n=Object(g.a)({},a);n.items=n.items.filter((function(e){return e[0]!==t.target.value})),localStorage.setItem(e.weekBeginning,JSON.stringify(n)),r(Object(g.a)({},n))}}function N(t){var n=Object(g.a)({},a),c=n.items.find((function(e){return e[0]===t.currentTarget.dataset.id})),i=t.currentTarget.dataset.day;e.isThisWeek?c[1][i]=-1===c[1][i]?0:0===c[1][i]?1:-1:c[1][i]=c[1][i]>-1?-1:0,localStorage.setItem(e.weekBeginning,JSON.stringify(n)),r(Object(g.a)({},n)),e.isThisWeek&&S()}function y(t){var n=Object(g.a)({},a),c=n.items.find((function(e){return e[0]===t.currentTarget.dataset.id})),i=t.currentTarget.dataset.day;c[1][i]=""===t.target.value?-1:+t.target.value,localStorage.setItem(e.weekBeginning,JSON.stringify(n)),r(Object(g.a)({},n)),e.isThisWeek&&S()}function S(){var t=JSON.parse(localStorage.getItem("archive")),n={date:e.weekBeginning,items:Object(h.a)(b)};if(t){var c=t.findIndex((function(e){return e.date===n.date}));-1!==c?t[c]=n:t.unshift(n)}else(t=[]).unshift(n);localStorage.setItem("archive",JSON.stringify(t))}return Object(i.useEffect)((function(){return function(){return x.apply(this,arguments)}()}),[a]),Object(c.jsxs)("div",{className:"week",children:[Object(c.jsx)("section",{children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"week-date left-column",children:e.weekBeginning}),Object(c.jsx)("td",{className:"week-date"}),e.days.map((function(t,n){return Object(c.jsx)("td",{className:"day",children:t},t+n+e.weekBeginning)}))]})}),Object(c.jsx)("tbody",{"data-dragweek":e.weekBeginning,children:b.map((function(t,n){return Object(c.jsx)(w,{id:t.id,index:n,text:t.text,type:t.type,number:t.number,color:t.color,todo:t.todo,isThisWeek:e.isThisWeek,weekBeginning:e.weekBeginning,onRemoveItem:k,onChangeDay:N,onSaveTodo:y},t.id+e.weekBeginning)}))})]})}),l.length>0&&Object(c.jsxs)("div",{className:"edit-box",children:[Object(c.jsx)("button",{className:"addAllItems",onClick:function(){var t=[],n=Object(g.a)({},a);l.forEach((function(e){return t.push(e.id)})),void 0===n.items&&(n={date:e.weekBeginning,items:[]}),t.forEach((function(e){return n.items.push([e,[-1,-1,-1,-1,-1,-1,-1]])})),localStorage.setItem(e.weekBeginning,JSON.stringify(n)),r(Object(g.a)({},n))},children:"add all items"}),Object(c.jsx)("div",{className:"items-list",children:l.map((function(t){return Object(c.jsx)("button",{value:t.id,"data-week":e.weekBeginning,className:"items-list-item "+t.color,onClick:f,children:t.text},t.id+e.weekBeginning+"u")}))})]})]})}var y=["color0","color1","color2","color3","color4","color5","color6","color7","color8","color9"],S=["M","T","W","T","F","S","S"];function I(){var e=n(),t=n(7);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,n=t.getDay();function c(e){return e<10?"0"+e:e}return n>1?t.setDate(t.getDate()-n+1+e):0===n?t.setDate(t.getDate()-6+e):t.setDate(t.getDate()+e),t.getFullYear()+"/"+c(t.getMonth()+1)+"/"+c(t.getDate())}return Object(c.jsxs)("main",{id:"arrange",children:[Object(c.jsx)("h1",{children:"This Week"}),Object(c.jsx)(N,{weekName:"This Week",days:S,weekBeginning:e,isThisWeek:!0},"thisWeek"),Object(c.jsx)("h2",{children:"Next Week"}),Object(c.jsx)(N,{weekName:"Next Week",days:S,weekBeginning:t,thisWeekBeginning:e},"nextWeek")]})}var C=n(48),B=n(49);function T(e){var t=e.item?Object(g.a)({},e.item):{id:"",text:"",type:!0,number:1,color:"color0"},n=Object(i.useState)(t),a=Object(O.a)(n,2),r=a[0],s=a[1];function o(e){var t=Object(g.a)({},r);t[e.target.name]=e.target.value,s(Object(g.a)({},t))}return Object(c.jsxs)("section",{children:[Object(c.jsxs)("div",{className:"item",children:[Object(c.jsx)("input",{type:"text",name:"text",value:r.text,onChange:o,className:"text"}),Object(c.jsx)("button",{name:"type",value:r.type,onClick:function(){var e=Object(g.a)({},r);e.type=!e.type,s(Object(g.a)({},e))},className:"type",children:r.type?Object(c.jsx)("div",{className:"day spot open"}):"#"}),Object(c.jsx)("input",{type:"number",name:"number",min:"1",max:"99999",value:r.number,onChange:o,className:"number"}),Object(c.jsx)("button",{className:"color "+r.color}),Object(c.jsx)("button",{onClick:e.onCancelUpdate,className:"plus-sign",children:Object(c.jsx)(C.a,{size:16})})]}),Object(c.jsxs)("div",{className:"edit-box",children:[Object(c.jsx)("div",{className:"palette",children:e.colors.map((function(e){return Object(c.jsx)("button",{name:"color",value:e,onClick:o,className:"palette-square "+e},e)}))}),Object(c.jsx)("div",{className:"edit-box-buttons",children:Object(c.jsx)("button",{onClick:function(){x(r)&&(e.onUpdateItem(Object(g.a)({},r)),s({id:"",text:"",type:!0,number:1,color:"color0"}))},className:"edit-complete",children:Object(c.jsx)(B.a,{size:16})})})]})]})}var W=n(50);function D(e){var t=Object(i.useState)(e.item),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],j=Object(i.useState)(!1),u=Object(O.a)(j,2),b=u[0],m=u[1];function h(){d(!0),e.onCancelNewItem()}return Object(i.useEffect)((function(){!function(){if(localStorage.getItem("weeks")){JSON.parse(localStorage.getItem("weeks")).forEach((function(t){t.items.find((function(t){return t[0]===e.item.id}))&&m(!0)}))}}()})),Object(c.jsx)("div",{children:l&&!e.currentlyAdding?Object(c.jsx)(T,{item:a,colors:e.colors,onUpdateItem:function(e){if(x(e)){var t=JSON.parse(localStorage.getItem("items")),n=t.findIndex((function(t){return t.id===e.id}));t[n]=e,localStorage.setItem("items",JSON.stringify(t)),r(Object(g.a)({},e)),d(!1)}},onCancelUpdate:function(){return d(!1)}}):Object(c.jsxs)("div",{className:"item",children:[Object(c.jsx)("div",{onClick:h,className:"text",children:a.text}),Object(c.jsx)("button",{onClick:h,className:"type",children:a.type?Object(c.jsx)("div",{className:"day spot open"}):Object(c.jsx)(W.a,{size:14})}),Object(c.jsx)("button",{onClick:h,className:"number",children:k(a.number)}),Object(c.jsx)("button",{onClick:h,className:"color "+a.color}),Object(c.jsx)("button",{value:a.id,disabled:b,onClick:e.onDeleteItem,className:"plus-sign",children:Object(c.jsx)(C.a,{size:16})})]})})}var J=n(52);n(40);function A(){var e=Object(i.useState)(localStorage.getItem("items")?JSON.parse(localStorage.getItem("items")).sort((function(e,t){return e.color>t.color?1:-1})):[]),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),s=Object(O.a)(r,2),o=s[0],l=s[1];function d(e){if(window.confirm("Really delete?")){var t=Object(h.a)(n).filter((function(t){return t.id!==e.target.value}));localStorage.setItem("items",JSON.stringify(t)),a(Object(h.a)(t))}}return Object(c.jsxs)("main",{id:"items",children:[Object(c.jsx)("h1",{children:"Items"}),n.map((function(e){return Object(c.jsx)(D,{item:e,colors:y,currentlyAdding:o,onDeleteItem:d,onCancelNewItem:function(){return l(!1)}},e.id)})),o?Object(c.jsx)(T,{colors:y,onUpdateItem:function(e){var t={id:Object(J.a)(),text:e.text,type:e.type,number:e.number,color:e.color},c=Object(h.a)(n);c.push(t),localStorage.setItem("items",JSON.stringify(c)),a(Object(h.a)(c))},onCancelUpdate:function(){return l(!1)}}):Object(c.jsx)("button",{onClick:function(){return l(!0)},className:"plus-sign add",children:Object(c.jsx)(u.a,{size:18})})]})}function E(e){return Object(c.jsx)("div",{className:"week",children:Object(c.jsx)("section",{children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"week-date left-column",children:e.week.date}),Object(c.jsx)("td",{className:"week-date"}),e.days.map((function(t,n){return Object(c.jsx)("td",{className:"day",children:t},t+n+e.week.date)}))]})}),Object(c.jsx)("tbody",{children:e.week.items.map((function(t,n){return Object(c.jsx)(w,{id:t.id,index:n,text:t.text,type:t.type,number:t.number,color:t.color,todo:t.todo,weekBeginning:e.week.date,archive:!0,onChangeDay:null,onRemoveItem:null},t.id+e.week.date)}))})]})})})}function z(e){var t=localStorage.getItem("archive")?JSON.parse(localStorage.getItem("archive")):[];return Object(c.jsxs)("main",{id:"arrange",children:[Object(c.jsx)("h1",{children:"Archive"}),t.map((function(e,t){return Object(c.jsx)(E,{week:e,days:S},"archiveWeek"+t)}))]})}n(41);var R=n(51);function U(){var e=Object(i.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(R.a,{size:16,className:"info",onClick:function(){return a(!n)}}),n&&Object(c.jsxs)("div",{className:"info-box",children:[Object(c.jsx)("h2",{children:"ITEMS"}),Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:["touch the ",Object(c.jsx)(u.a,{size:16})," to add an item"]}),Object(c.jsx)("li",{children:"enter the item's name"}),Object(c.jsx)("li",{children:"choose between dot (one per day) or number (up to 100,000 per week)"}),Object(c.jsx)("li",{children:"enter a weekly goal number for the item (max. 7 for dots; max. 100,000 for numbers)"}),Object(c.jsx)("li",{children:"choose a colour for the item (similar items can be visually grouped)"}),Object(c.jsxs)("li",{children:["touch ",Object(c.jsx)(B.a,{size:16})," to save, or ",Object(c.jsx)(C.a,{size:16})," to cancel"]}),Object(c.jsx)("li",{children:"touch an item to edit it"})]}),Object(c.jsx)("h2",{children:"ARRANGE"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"items are listed for this week & next week"}),Object(c.jsx)("li",{children:"touch an item to add it to the week"}),Object(c.jsx)("li",{children:"for dot items"}),Object(c.jsxs)("li",{className:"indent",children:["touch once on a given day to set it as ",Object(c.jsx)("i",{children:"todo"})," for that day"]}),Object(c.jsxs)("li",{className:"indent",children:["touch again to set it as ",Object(c.jsx)("i",{children:"done"})," for that day"]}),Object(c.jsx)("li",{children:"for number items"}),Object(c.jsx)("li",{className:"indent",children:"when you've completed a number (e.g. 5,000 steps), touch the relevant square twice to enter it"}),Object(c.jsx)("li",{className:"indent",children:"the number to the left of Monday tells you how many left to do that week"}),Object(c.jsx)("li",{children:"when you've hit the weekly target for an item, the row will turn black"})]}),Object(c.jsx)("h2",{children:"ARCHIVE"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"lists previous weeks"}),Object(c.jsx)("li",{children:"not editable"})]})]})]})}n(42);function M(){return Object(c.jsxs)(o.a,{basename:"/turtledot-x",children:[Object(c.jsx)(j,{}),Object(c.jsx)(U,{}),Object(c.jsx)("div",{className:"bgPanel"}),Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/Items",children:Object(c.jsx)(A,{})}),Object(c.jsx)(l.b,{path:"/Arrange",children:Object(c.jsx)(I,{})}),Object(c.jsx)(l.b,{path:"/Archive",children:Object(c.jsx)(z,{})}),Object(c.jsx)(l.b,{path:"/",children:Object(c.jsx)(l.a,{to:"/Arrange"})})]}),Object(c.jsx)(m,{})]})}n(43);var L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/turtledot-x",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/turtledot-x","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):H(t,e)}))}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.915b05f7.chunk.js.map